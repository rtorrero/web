{"components":{"responses":{},"schemas":{"Tags":{"description":"A list of tags attached to a resource","items":{"$ref":"#/components/schemas/Tag"},"title":"Tags","type":"array","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Tags","x-validate":null},"CheckResults":{"description":"A list of tags attached to a resource","items":{"$ref":"#/components/schemas/CheckResult"},"title":"CheckResults","type":"array","x-struct":null,"x-validate":null},"PacemakerCluster":{"description":"A discovered Pacemaker Cluster on the target infrastructure","properties":{"checks_execution":{"description":"Current status of the checks execution for this cluster","enum":["not_running","requested","running"],"nullable":true,"type":"string","x-struct":null,"x-validate":null},"checks_results":{"description":"A list of tags attached to a resource","items":{"$ref":"#/components/schemas/CheckResult"},"title":"CheckResults","type":"array","x-struct":null,"x-validate":null},"cib_last_written":{"description":"CIB last written date","nullable":true,"type":"string","x-struct":null,"x-validate":null},"details":{"$ref":"#/components/schemas/PacemakerClusterDetail"},"health":{"$ref":"#/components/schemas/ResourceHealth"},"hosts_executions":{"description":"A list of tags attached to a resource","items":{"$ref":"#/components/schemas/HostChecksExecution"},"title":"HostChecksExecutions","type":"array","x-struct":null,"x-validate":null},"hosts_number":{"description":"Hosts number","nullable":true,"type":"integer","x-struct":null,"x-validate":null},"id":{"description":"Cluster ID","format":"uuid","type":"string","x-struct":null,"x-validate":null},"name":{"description":"Cluster name","type":"string","x-struct":null,"x-validate":null},"provider":{"$ref":"#/components/schemas/SupportedProviders"},"resources_number":{"description":"Resource number","nullable":true,"type":"integer","x-struct":null,"x-validate":null},"selected_checks":{"description":"A list ids of the checks selected for execution on this cluster","items":{"type":"string","x-struct":null,"x-validate":null},"title":"SelectedChecks","type":"array","x-struct":null,"x-validate":null},"sid":{"description":"SID","type":"string","x-struct":null,"x-validate":null},"tags":{"$ref":"#/components/schemas/Tags"},"type":{"description":"Detected type of the cluster","enum":["hana_scale_up","hana_scale_out","unknown"],"type":"string","x-struct":null,"x-validate":null}},"title":"PacemakerCluster","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Cluster.PacemakerCluster","x-validate":null},"DatabaseInstances":{"description":"A list of DatabaseInstances, part of a complete SAP System, or only a HANA Database","items":{"$ref":"#/components/schemas/DatabaseInstance"},"title":"DatabaseInstances","type":"array","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Database.DatabaseInstances","x-validate":null},"ChecksProvider":{"description":"The provider determining the values for the attached checks (azure, aws ...)","enum":["azure","aws","gcp","default"],"title":"ChecksProvider","type":"string","x-struct":null,"x-validate":null},"CheckResult":{"description":"Representation of the result of a spectific check on a host of a cluster","properties":{"check_id":{"description":"The identifier of the executed check","type":"string","x-struct":null,"x-validate":null},"cluster_id":{"description":"Cluster's ID","format":"uuid","type":"string","x-struct":null,"x-validate":null},"host_id":{"description":"Host's ID","format":"uuid","type":"string","x-struct":null,"x-validate":null},"inserted_at":{"description":"Creation timestamp","format":"date-time","type":"string","x-struct":null,"x-validate":null},"result":{"description":"The Result of the Check","enum":["passing","warning","critical","skipped","unknown"],"type":"string","x-struct":null,"x-validate":null},"updated_at":{"description":"Update timestamp","format":"date-time","type":"string","x-struct":null,"x-validate":null}},"title":"CheckResult","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Checks.CheckResult","x-validate":null},"GcpProviderData":{"description":"GCP detected metadata","properties":{"disk_number":{"type":"integer","x-struct":null,"x-validate":null},"image":{"type":"string","x-struct":null,"x-validate":null},"instance_name":{"type":"string","x-struct":null,"x-validate":null},"machine_type":{"type":"string","x-struct":null,"x-validate":null},"network":{"type":"string","x-struct":null,"x-validate":null},"project_id":{"type":"string","x-struct":null,"x-validate":null},"zone":{"type":"string","x-struct":null,"x-validate":null}},"title":"GcpProviderData","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Provider.GcpProviderData","x-validate":null},"DatabasesCollection":{"description":"A list of the discovered HANA Databases","items":{"$ref":"#/components/schemas/Database"},"title":"DatabasesCollection","type":"array","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Database.DatabasesCollection","x-validate":null},"IPv6":{"format":"ipv6","title":"IPv6","type":"string","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Host.IPv6","x-validate":null},"ChecksGroup":{"description":"A Group of related Checks (Corosync, Pacemaker ...)","properties":{"checks":{"$ref":"#/components/schemas/FlatCatalog"},"group":{"description":"Group Name","type":"string","x-struct":null,"x-validate":null}},"title":"ChecksGroup","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.ChecksCatalog.ChecksGroup","x-validate":null},"ChecksSelectionRequest":{"description":"A list of desired checks that should be executed on the target infrastructure","properties":{"checks":{"items":{"type":"string","x-struct":null,"x-validate":null},"type":"array","x-struct":null,"x-validate":null}},"title":"ChecksSelectionRequest","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Checks.ChecksSelectionRequest","x-validate":null},"UnableToLoadCatalog":{"description":"Something wrong happened while loading the catalog. ie: it is not ready yet","example":{"error":"(not_ready|some other error message)"},"properties":{"error":{"description":"The error message","type":"string","x-struct":null,"x-validate":null}},"title":"UnableToLoadCatalog","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.ChecksCatalog.UnableToLoadCatalog","x-validate":null},"ResourceHealth":{"description":"Detected health of a Resource","enum":["passing","warning","critical","unknown"],"nullable":true,"title":"ResourceHealth","type":"string","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.ResourceHealth","x-validate":null},"GeneralInformation":{"description":"General information about the current installation","properties":{"flavor":{"description":"Flavor of the current installation","enum":["Community","Premium"],"type":"string","x-struct":null,"x-validate":null},"sles_subscriptions":{"description":"The number of SLES Subscription discovered on the target infrastructure","type":"integer","x-struct":null,"x-validate":null},"version":{"description":"Version of the current server component installation","type":"string","x-struct":null,"x-validate":null}},"title":"GeneralInformation","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Platform.GeneralInformation","x-validate":null},"PlatformSettings":{"description":"Settings values for the current installation","properties":{"eula_accepted":{"description":"Whether the user has accepted EULA (on a Premium installation)","type":"boolean","x-struct":null,"x-validate":null},"premium_subscription":{"description":"Whether current installation is a Premium one","type":"boolean","x-struct":null,"x-validate":null}},"title":"PlatformSettings","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Platform.Settings","x-validate":null},"HostChecksExecution":{"description":"Representation of the current check execution on a specific host of a Cluster","properties":{"cluster_id":{"description":"Cluster's ID","format":"uuid","type":"string","x-struct":null,"x-validate":null},"host_id":{"description":"Host's ID","format":"uuid","type":"string","x-struct":null,"x-validate":null},"msg":{"description":"A message","type":"string","x-struct":null,"x-validate":null},"reachable":{"description":"Indicates whether the host was reachable during the connection to run selected checks","type":"boolean","x-struct":null,"x-validate":null}},"title":"HostChecksExecution","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Checks.HostChecksExecution","x-validate":null},"FilterableProvider":{"description":"A provider that can be used to filter the Catalog","enum":["azure","aws","gcp","default"],"title":"FilterableProvider","type":"string","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Provider.FilterableProviders","x-validate":null},"HealthOverview":{"description":"A list of health summaries for the discovered SAP Systems","items":{"$ref":"#/components/schemas/SAPSystemHealthOverview"},"title":"HealthOverview","type":"array","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.SAPSystem.HealthOverview","x-validate":null},"SAPSystemsCollection":{"description":"A list of the discovered SAP Systems","items":{"$ref":"#/components/schemas/SAPSystem"},"title":"SAPSystemsCollection","type":"array","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.SAPSystem.SAPSystemsCollection","x-validate":null},"ClusterResource":{"description":"A list of the stopped resources on this HANA Cluster","items":{"$ref":"#/components/schemas/ClusterResource"},"title":"ClusterResource","type":"array","x-struct":null,"x-validate":null},"Check":{"description":"An available check to be executed on the target infrastructure","properties":{"description":{"description":"Check Description","type":"string","x-struct":null,"x-validate":null},"group":{"description":"Check Group, available when requiring a Flat Catalog","type":"string","x-struct":null,"x-validate":null},"id":{"description":"Check ID","format":"uuid","type":"string","x-struct":null,"x-validate":null},"implementation":{"description":"Check Implementation","type":"string","x-struct":null,"x-validate":null},"labels":{"description":"Check Labels","type":"string","x-struct":null,"x-validate":null},"name":{"description":"Check Name","type":"string","x-struct":null,"x-validate":null},"premium":{"description":"Indicates whether the current check is a Premium check","type":"boolean","x-struct":null,"x-validate":null},"provider":{"$ref":"#/components/schemas/SupportedProviders"},"remediation":{"description":"Check Remediation","type":"string","x-struct":null,"x-validate":null}},"title":"Check","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.ChecksCatalog.Check","x-validate":null},"AzureProviderData":{"description":"Azure detected metadata","properties":{"admin_username":{"type":"string","x-struct":null,"x-validate":null},"data_disk_number":{"type":"integer","x-struct":null,"x-validate":null},"location":{"type":"string","x-struct":null,"x-validate":null},"offer":{"type":"string","x-struct":null,"x-validate":null},"resource_group":{"type":"string","x-struct":null,"x-validate":null},"sku":{"type":"string","x-struct":null,"x-validate":null},"vm_size":{"type":"string","x-struct":null,"x-validate":null}},"title":"AzureProviderData","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Provider.AzureProviderData","x-validate":null},"CallbackEvent":{"description":"Represents a progress update sent during Checks Execution to notify the system","example":{"event":"execution_completed","execution_id":"3fa85f64-5717-4562-b3fc-2c963f66afa6","payload":{"cluster_id":"146a4e9f-9cdb-466e-9601-9af94b8b4f65","hosts":[{"host_id":"ae44943b-d866-4878-88c9-b4d49006460d","msg":"Some message","reachable":true,"results":[{"check_id":"ACH3CK1D","result":"passing"}]}]}},"properties":{"event":{"enum":["execution_started","execution_completed"],"type":"string","x-struct":null,"x-validate":null},"execution_id":{"description":"The identifier of an execution. It has been provided on execution request.","format":"uuid","type":"string","x-struct":null,"x-validate":null},"payload":{"oneOf":[{"$ref":"#/components/schemas/ExecutionStarted"},{"$ref":"#/components/schemas/ExecutionCompleted"}],"x-struct":null,"x-validate":null}},"title":"CallbackEvent","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Runner.CallbackEvent","x-validate":null},"PacemakerClustersCollection":{"description":"A list of the discovered Pacemaker Clusters","items":{"$ref":"#/components/schemas/PacemakerCluster"},"title":"PacemakerClustersCollection","type":"array","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Cluster.PacemakerClustersCollection","x-validate":null},"ExecutionCompleted":{"description":"The execution of the Check Selection completed on the target infrastructure, for a specific Cluster","properties":{"cluster_id":{"$ref":"#/components/schemas/ResourceIdentifier"},"hosts":{"items":{"properties":{"host_id":{"$ref":"#/components/schemas/ResourceIdentifier"},"msg":{"type":"string","x-struct":null,"x-validate":null},"reachable":{"type":"boolean","x-struct":null,"x-validate":null},"results":{"items":{"properties":{"check_id":{"type":"string","x-struct":null,"x-validate":null},"result":{"description":"The Result of the Check","enum":["passing","warning","critical","skipped"],"type":"string","x-struct":null,"x-validate":null}},"type":"object","x-struct":null,"x-validate":null},"type":"array","x-struct":null,"x-validate":null}},"type":"object","x-struct":null,"x-validate":null},"type":"array","x-struct":null,"x-validate":null}},"title":"ExecutionCompleted","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Runner.ExecutionCompleted","x-validate":null},"ExecutionStarted":{"description":"The execution of the Check Selection started on the target infrastructure, for a specific Cluster","properties":{"cluster_id":{"$ref":"#/components/schemas/ResourceIdentifier"}},"title":"ExecutionStarted","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Runner.ExecutionStarted","x-validate":null},"SbdDevice":{"items":{"$ref":"#/components/schemas/SbdDevice"},"title":"SbdDevice","type":"array","x-struct":null,"x-validate":null},"SlesSubscription":{"description":"A discovered SLES Subscription on a host","properties":{"arch":{"type":"string","x-struct":null,"x-validate":null},"expires_at":{"type":"string","x-struct":null,"x-validate":null},"host_id":{"format":"uuid","type":"string","x-struct":null,"x-validate":null},"identifier":{"type":"string","x-struct":null,"x-validate":null},"starts_at":{"type":"string","x-struct":null,"x-validate":null},"status":{"type":"string","x-struct":null,"x-validate":null},"subscription_status":{"type":"string","x-struct":null,"x-validate":null},"type":{"type":"string","x-struct":null,"x-validate":null},"version":{"type":"string","x-struct":null,"x-validate":null}},"title":"SlesSubscription","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.SlesSubscription","x-validate":null},"IPv4":{"format":"ipv4","title":"IPv4","type":"string","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Host.IPv4","x-validate":null},"ApplicationInstance":{"description":"A discovered Application Instance on the target infrastructure","properties":{"features":{"description":"Instance Features","type":"string","x-struct":null,"x-validate":null},"health":{"$ref":"#/components/schemas/ResourceHealth"},"host_id":{"description":"Identifier of the host where current instance is running","format":"uuid","type":"string","x-struct":null,"x-validate":null},"http_port":{"description":"Instance HTTP Port","nullable":true,"type":"integer","x-struct":null,"x-validate":null},"https_port":{"description":"Instance HTTPS Port","nullable":true,"type":"integer","x-struct":null,"x-validate":null},"instance_hostname":{"description":"Instance Hostname","nullable":true,"type":"string","x-struct":null,"x-validate":null},"instance_number":{"description":"Instance Number","type":"string","x-struct":null,"x-validate":null},"sap_system_id":{"description":"SAP System ID","format":"uuid","type":"string","x-struct":null,"x-validate":null},"sid":{"description":"SID","type":"string","x-struct":null,"x-validate":null},"start_priority":{"description":"Instance Start Priority","nullable":true,"type":"string","x-struct":null,"x-validate":null}},"title":"ApplicationInstance","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.SAPSystem.ApplicationInstance","x-validate":null},"EmptyResponse":{"example":{},"title":"EmptyResponse","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Common.EmptyResponse","x-validate":null},"ChecksCatalog":{"description":"A representation of the Checks Catalog","example":[{"groups":[{"checks":[{"description":"Corosync `token` timeout is set to `5000`\n","id":"156F64","implementation":"---\n\n- name: \"{{ name }}.check\"\n  lineinfile:\n    path: /etc/corosync/corosync.conf\n    regexp: '^(\\s+){{ key_name }}:'\n    line: \"\\t{{ key_name }}: {{ expected[name] }}\"\n    insertafter: 'totem {'\n  register: config_updated\n  when:\n    - ansible_check_mode\n\n- block:\n    - name: Post results\n      import_role:\n        name: post-results\n  when:\n    - ansible_check_mode\n  vars:\n    status: \"{{ config_updated is not changed }}\"","labels":"generic","name":"1.1.1","premium":false,"remediation":"## Abstract\nThe value of the Corosync `token` timeout is not set as recommended.\n\n## Remediation\n\nAdjust the corosync `token` timeout as recommended on the best practices, and reload the corosync configuration\n\n1. Set the correct `token` timeout in the totem session in the corosync config file `/etc/corosync/corosync.conf`. This action must be repeated in all nodes of the cluster.\n   ```\n   [...]\n   totem { \n          token: <timeout value> \n         }\n   [...]\n   ```   \n2. Reload the corosync configuration:\n   `crm corosync reload`\n\n## References\n- https://docs.microsoft.com/en-us/azure/virtual-machines/workloads/sap/high-availability-guide-suse-pacemaker\n"},{"description":"Corosync is running with `token` timeout set to `5000`\n","id":"53D035","implementation":"---\n\n- name: \"{{ name }}.check\"\n  shell: 'corosync-cmapctl | grep \"runtime.config.totem.token (u32) = \" | sed \"s/^.*= //\"'\n  check_mode: false\n  register: config_updated\n  changed_when: config_updated.stdout != expected['1.1.1']\n\n- block:\n    - name: Post results\n      import_role:\n        name: post-results\n  when:\n    - ansible_check_mode\n  vars:\n    status: \"{{ config_updated is not changed }}\"","labels":"generic","name":"1.1.1.runtime","premium":false,"remediation":"## Abstract\nThe runtime value of the Corosync `token` timeout is not set as recommended.\n\n## Remediation\n\nAdjust the corosync `token` timeout as recommended on the best practices, and reload the corosync configuration\n\n\n1. Set the correct `token` timeout in the totem session in the corosync config file `/etc/corosync/corosync.conf`. This action must be repeated in all nodes of the cluster.\n   ```\n   [...]\n   totem { \n          token: <timeout value> \n         }\n   [...]\n   ```   \n2. Reload the corosync configuration:\n   `crm corosync reload`\n\n## References\n- https://docs.microsoft.com/en-us/azure/virtual-machines/workloads/sap/high-availability-guide-suse-pacemaker\n"}],"group":"Corosync"},{"checks":[{"description":"Fencing is enabled in the cluster attributes\n","id":"205AF7","implementation":"---\n\n- name: \"{{ name }}.check\"\n  command: 'crm_attribute -t crm_config -G -n stonith-enabled --quiet'\n  check_mode: false\n  register: config_updated\n  changed_when: config_updated.stdout != expected[name]\n\n- block:\n    - name: Post results\n      import_role:\n        name: post-results\n  when:\n    - ansible_check_mode\n  vars:\n    status: \"{{ config_updated is not changed }}\"","labels":"generic","name":"1.2.1","premium":false,"remediation":"## Abstract\nFencing is mandatory to guarantee data integrity for your SAP Applications.\nRunning a HA Cluster without fencing is not supported and might cause data loss.\n\n## Remediation\nExecute the following command to enable it:\n```\ncrm configure property stonith-enabled=true\n```\n\n## References\n- https://documentation.suse.com/sle-ha/15-SP3/html/SLE-HA-all/cha-ha-fencing.html#sec-ha-fencing-recommend\n"}],"group":"Pacemaker"}],"provider":"aws"}],"oneOf":[{"$ref":"#/components/schemas/GroupedCatalog"},{"$ref":"#/components/schemas/FlatCatalog"}],"title":"ChecksCatalog","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.ChecksCatalog.Catalog","x-validate":null},"Host":{"description":"A discovered host on the target infrastructure","properties":{"agent_version":{"description":"Version of the agent installed on the host","type":"string","x-struct":null,"x-validate":null},"cluster_id":{"description":"Identifier of the cluster this host is part of","format":"uuid","type":"string","x-struct":null,"x-validate":null},"heartbeat":{"description":"Host's last heartbeat status","enum":["critical","passing","unknown"],"type":"string","x-struct":null,"x-validate":null},"hostname":{"description":"Host name","type":"string","x-struct":null,"x-validate":null},"id":{"description":"Host ID","format":"uuid","type":"string","x-struct":null,"x-validate":null},"ip_addresses":{"description":"IP addresses","items":{"anyOf":[{"$ref":"#/components/schemas/IPv4"},{"$ref":"#/components/schemas/IPv6"}],"title":"IPAddress","x-struct":null,"x-validate":null},"type":"array","x-struct":null,"x-validate":null},"provider":{"$ref":"#/components/schemas/SupportedProviders"},"provider_data":{"$ref":"#/components/schemas/ProviderMetadata"},"sles_subscriptions":{"description":"A list of the available SLES Subscriptions on a host","items":{"$ref":"#/components/schemas/SlesSubscription"},"title":"SlesSubscriptions","type":"array","x-struct":null,"x-validate":null},"ssh_address":{"$ref":"#/components/schemas/IPv4"},"tags":{"$ref":"#/components/schemas/Tags"}},"title":"Host","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Host.HostItem","x-validate":null},"SelectedChecks":{"description":"A list ids of the checks selected for execution on this cluster","items":{"type":"string","x-struct":null,"x-validate":null},"title":"SelectedChecks","type":"array","x-struct":null,"x-validate":null},"Tag":{"description":"A tag attached to a resource","properties":{"id":{"type":"integer","x-struct":null,"x-validate":null},"resource_id":{"format":"uuid","type":"string","x-struct":null,"x-validate":null},"resource_type":{"enum":["host","cluster","sap_system","database"],"type":"string","x-struct":null,"x-validate":null},"value":{"type":"string","x-struct":null,"x-validate":null}},"title":"Tag","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Tags.Tag","x-validate":null},"ResourceIdentifier":{"format":"uuid","title":"ResourceIdentifier","type":"string","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Runner.ResourceIdentifier","x-validate":null},"ProviderCatalog":{"description":"A Provider specific Catalog, and respective values","properties":{"groups":{"description":"A list of ChecksGroup for the respective provider","items":{"$ref":"#/components/schemas/ChecksGroup"},"title":"ChecksGroups","type":"array","x-struct":null,"x-validate":null},"provider":{"description":"The provider determining the values for the attached checks (azure, aws ...)","enum":["azure","aws","gcp","default"],"title":"ChecksProvider","type":"string","x-struct":null,"x-validate":null}},"title":"ProviderCatalog","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.ChecksCatalog.ProviderCatalog","x-validate":null},"IPAddress":{"anyOf":[{"$ref":"#/components/schemas/IPv4"},{"$ref":"#/components/schemas/IPv6"}],"title":"IPAddress","x-struct":null,"x-validate":null},"AwsProviderData":{"description":"AWS detected metadata","properties":{"account_id":{"type":"string","x-struct":null,"x-validate":null},"ami_id":{"type":"string","x-struct":null,"x-validate":null},"availability_zone":{"type":"string","x-struct":null,"x-validate":null},"data_disk_number":{"type":"integer","x-struct":null,"x-validate":null},"instance_id":{"type":"string","x-struct":null,"x-validate":null},"instance_type":{"type":"string","x-struct":null,"x-validate":null},"region":{"type":"string","x-struct":null,"x-validate":null},"vpc_id":{"type":"string","x-struct":null,"x-validate":null}},"title":"AwsProviderData","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Provider.AwsProviderData","x-validate":null},"DatabaseInstance":{"description":"A discovered HANA Database Instance on the target infrastructure","properties":{"features":{"description":"Instance Features","type":"string","x-struct":null,"x-validate":null},"health":{"$ref":"#/components/schemas/ResourceHealth"},"host_id":{"description":"Identifier of the host where current instance is running","format":"uuid","type":"string","x-struct":null,"x-validate":null},"http_port":{"description":"Instance HTTP Port","nullable":true,"type":"integer","x-struct":null,"x-validate":null},"https_port":{"description":"Instance HTTPS Port","nullable":true,"type":"integer","x-struct":null,"x-validate":null},"instance_hostname":{"description":"Instance Hostname","nullable":true,"type":"string","x-struct":null,"x-validate":null},"instance_number":{"description":"Instance Number","type":"string","x-struct":null,"x-validate":null},"sap_system_id":{"description":"SAP System ID","format":"uuid","type":"string","x-struct":null,"x-validate":null},"sid":{"description":"SID","type":"string","x-struct":null,"x-validate":null},"start_priority":{"description":"Instance Start Priority","nullable":true,"type":"string","x-struct":null,"x-validate":null},"system_replication":{"description":"System Replication","type":"string","x-struct":null,"x-validate":null},"system_replication_status":{"description":"System Replication Status","type":"string","x-struct":null,"x-validate":null},"tenant":{"description":"Tenant","type":"string","x-struct":null,"x-validate":null}},"title":"DatabaseInstance","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Database.DatabaseInstance","x-validate":null},"HanaClusterDetails":{"description":"Details of a HANA Pacemaker Cluster","properties":{"fencing_type":{"description":"Fencing Type","type":"string","x-struct":null,"x-validate":null},"nodes":{"items":{"$ref":"#/components/schemas/ClusterNode"},"title":"HanaClusterNodes","type":"array","x-struct":null,"x-validate":null},"sbd_devices":{"items":{"$ref":"#/components/schemas/SbdDevice"},"title":"SbdDevice","type":"array","x-struct":null,"x-validate":null},"secondary_sync_state":{"description":"Secondary Sync State","type":"string","x-struct":null,"x-validate":null},"sr_health_state":{"description":"SR health state","type":"string","x-struct":null,"x-validate":null},"stopped_resources":{"description":"A list of the stopped resources on this HANA Cluster","items":{"$ref":"#/components/schemas/ClusterResource"},"title":"ClusterResource","type":"array","x-struct":null,"x-validate":null},"system_replication_mode":{"description":"System Replication Mode","type":"string","x-struct":null,"x-validate":null},"system_replication_operation_mode":{"description":"System Replication Operation Mode","type":"string","x-struct":null,"x-validate":null}},"title":"HanaClusterDetails","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Cluster.HanaClusterDetails","x-validate":null},"ClusterNodeAttributes":{"items":{"type":"string","x-struct":null,"x-validate":null},"title":"ClusterNodeAttributes","type":"array","x-struct":null,"x-validate":null},"ChecksGroups":{"description":"A list of ChecksGroup for the respective provider","items":{"$ref":"#/components/schemas/ChecksGroup"},"title":"ChecksGroups","type":"array","x-struct":null,"x-validate":null},"Database":{"description":"A discovered HANA Database on the target infrastructure","properties":{"database_instances":{"$ref":"#/components/schemas/DatabaseInstances"},"health":{"$ref":"#/components/schemas/ResourceHealth"},"id":{"description":"Database ID","format":"uuid","type":"string","x-struct":null,"x-validate":null},"sid":{"description":"SID","type":"string","x-struct":null,"x-validate":null},"tags":{"$ref":"#/components/schemas/Tags"}},"title":"Database","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Database.DatabaseItem","x-validate":null},"GroupedCatalog":{"description":"A list of available Checks: grouped by provider (azure, aws ...) and checks groups (Corosync, Pacemaker ...)","items":{"$ref":"#/components/schemas/ProviderCatalog"},"title":"GroupedCatalog","type":"array","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.ChecksCatalog.GroupedCatalog","x-validate":null},"SupportedProviders":{"description":"Detected Provider where the resource is running","enum":["azure","aws","gcp","kvm","nutanix","unknown"],"title":"SupportedProviders","type":"string","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Provider.SupportedProviders","x-validate":null},"ClusterNode":{"description":"A Cluster Node","properties":{"attributes":{"items":{"type":"string","x-struct":null,"x-validate":null},"title":"ClusterNodeAttributes","type":"array","x-struct":null,"x-validate":null},"hana_status":{"type":"string","x-struct":null,"x-validate":null},"name":{"type":"string","x-struct":null,"x-validate":null},"resources":{"description":"A list of ClusterNodes","items":{"$ref":"#/components/schemas/ClusterResource"},"title":"ClustrNodeResources","type":"array","x-struct":null,"x-validate":null},"site":{"type":"string","x-struct":null,"x-validate":null},"virtual_ip":{"type":"string","x-struct":null,"x-validate":null}},"title":"ClusterNode","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Cluster.ClusterNode","x-validate":null},"BadRequestResponse":{"description":"Something wrong happened while executing requested operation","example":{"error":"some error message"},"properties":{"error":{"description":"The error message","type":"string","x-struct":null,"x-validate":null}},"title":"BadRequestResponse","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Common.BadRequestResponse","x-validate":null},"HanaClusterNodes":{"items":{"$ref":"#/components/schemas/ClusterNode"},"title":"HanaClusterNodes","type":"array","x-struct":null,"x-validate":null},"SAPSystem":{"description":"A discovered SAP System on the target infrastructure","properties":{"application_instances":{"description":"A list of the discovered Application Instances for current SAP Systems","items":{"$ref":"#/components/schemas/ApplicationInstance"},"title":"ApplicationInstances","type":"array","x-struct":null,"x-validate":null},"database_instances":{"$ref":"#/components/schemas/DatabaseInstances"},"db_host":{"description":"Address of the connected Database","type":"string","x-struct":null,"x-validate":null},"health":{"$ref":"#/components/schemas/ResourceHealth"},"id":{"description":"SAP System ID","format":"uuid","type":"string","x-struct":null,"x-validate":null},"sid":{"description":"SID","type":"string","x-struct":null,"x-validate":null},"tags":{"$ref":"#/components/schemas/Tags"},"tenant":{"description":"Tenant","type":"string","x-struct":null,"x-validate":null}},"title":"SAPSystem","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.SAPSystem.SAPSystemItem","x-validate":null},"ApiKey":{"properties":{"api_key":{"type":"string","x-struct":null,"x-validate":null}},"title":"ApiKey","type":"object","x-struct":null,"x-validate":null},"ClustrNodeResources":{"description":"A list of ClusterNodes","items":{"$ref":"#/components/schemas/ClusterResource"},"title":"ClustrNodeResources","type":"array","x-struct":null,"x-validate":null},"HostChecksExecutions":{"description":"A list of tags attached to a resource","items":{"$ref":"#/components/schemas/HostChecksExecution"},"title":"HostChecksExecutions","type":"array","x-struct":null,"x-validate":null},"SlesSubscriptions":{"description":"A list of the available SLES Subscriptions on a host","items":{"$ref":"#/components/schemas/SlesSubscription"},"title":"SlesSubscriptions","type":"array","x-struct":null,"x-validate":null},"PacemakerClusterDetail":{"description":"Details of the detected PacemakerCluster","nullable":true,"oneOf":[{"$ref":"#/components/schemas/HanaClusterDetails"}],"title":"PacemakerClusterDetail","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Cluster.Details","x-validate":null},"HostsCollection":{"description":"A list of the discovered hosts","items":{"$ref":"#/components/schemas/Host"},"title":"HostsCollection","type":"array","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Host.HostsCollection","x-validate":null},"SAPSystemHealthOverview":{"description":"An overview of the health of a discovered SAP System and its components","properties":{"clusters_health":{"$ref":"#/components/schemas/ResourceHealth"},"database_health":{"$ref":"#/components/schemas/ResourceHealth"},"hosts_health":{"$ref":"#/components/schemas/ResourceHealth"},"id":{"description":"SAP System ID","format":"uuid","type":"string","x-struct":null,"x-validate":null},"sapsystem_health":{"$ref":"#/components/schemas/ResourceHealth"},"sid":{"description":"SID","type":"string","x-struct":null,"x-validate":null}},"title":"SAPSystemHealthOverview","type":"object","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.SAPSystem.SAPSystemHealthOverview","x-validate":null},"ApplicationInstances":{"description":"A list of the discovered Application Instances for current SAP Systems","items":{"$ref":"#/components/schemas/ApplicationInstance"},"title":"ApplicationInstances","type":"array","x-struct":null,"x-validate":null},"ProviderMetadata":{"description":"Detected metadata for any provider","nullable":true,"oneOf":[{"$ref":"#/components/schemas/AwsProviderData"},{"$ref":"#/components/schemas/AzureProviderData"},{"$ref":"#/components/schemas/GcpProviderData"}],"title":"ProviderMetadata","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.Provider.ProviderData","x-validate":null},"FlatCatalog":{"description":"A flat list of the available Checks","items":{"$ref":"#/components/schemas/Check"},"title":"FlatCatalog","type":"array","x-struct":"Elixir.TrentoWeb.OpenApi.Schema.ChecksCatalog.FlatCatalog","x-validate":null}}},"info":{"description":"Easing your life in administering SAP applications","title":"Trento","version":"1.2.0"},"openapi":"3.0.0","paths":{"/api/about":{"get":{"callbacks":{},"description":"Provides general information about the current Platform installation.","operationId":"TrentoWeb.AboutController.info","parameters":[],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GeneralInformation"}}},"description":"Platform Information"}},"summary":"Platform General Information","tags":["Platform"]}},"/api/accept_eula":{"post":{"callbacks":{},"description":"Accepting EULA allows the end user to use the platform","operationId":"TrentoWeb.SettingsController.accept_eula","parameters":[],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmptyResponse"}}},"description":"EULA acceptance has been correctly registered and the user may continue using the platform"}},"summary":"Accept Eula","tags":["Platform"]}},"/api/checks/catalog":{"get":{"callbacks":{},"description":"The list of the available checks that can be configured to run on the target SAP infrastructure","operationId":"TrentoWeb.CatalogController.checks_catalog","parameters":[{"description":"Whether to output a flat catalog or not. Just provide the flag, not the value. eg /api/checks/catalog?flat","in":"query","name":"flat","required":false,"schema":{"type":"string","x-struct":null,"x-validate":null}},{"description":"Whether to filter by a specific provider","in":"query","name":"provider","required":false,"schema":{"$ref":"#/components/schemas/FilterableProvider"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChecksCatalog"}}},"description":"A Collection of the available Checks"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnableToLoadCatalog"}}},"description":"Bad Request"}},"summary":"Checks Catalog","tags":["Checks"]}},"/api/clusters":{"get":{"callbacks":{},"description":"List all the discovered Pacemaker Clusters on the target infrastructure","operationId":"TrentoWeb.ClusterController.list","parameters":[],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PacemakerClustersCollection"}}},"description":"A collection of the discovered Pacemaker Clusters"}},"summary":"List Pacemaker Clusters","tags":["Target Infrastructure"]}},"/api/clusters/{cluster_id}/checks":{"post":{"callbacks":{},"description":"Select the Checks eligible for execution on the target infrastructure","operationId":"TrentoWeb.ClusterController.select_checks","parameters":[{"description":"","in":"path","name":"cluster_id","required":true,"schema":{"format":"uuid","type":"string","x-struct":null,"x-validate":null}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChecksSelectionRequest"}}},"description":"Checks Selection","required":false},"responses":{"202":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmptyResponse"}}},"description":"The Selection has been successfully collected"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequestResponse"}}},"description":"Something went wrong with the collection of the Checks Selection"}},"summary":"Select Checks","tags":["Checks"]}},"/api/clusters/{cluster_id}/checks/request_execution":{"post":{"callbacks":{},"description":"Trigger execution of the latest Checks Selection on the target infrastructure","operationId":"TrentoWeb.ClusterController.request_checks_execution","parameters":[{"description":"","in":"path","name":"cluster_id","required":true,"schema":{"format":"uuid","type":"string","x-struct":null,"x-validate":null}}],"responses":{"202":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmptyResponse"}}},"description":"The Command has been accepted and the Requested execution is scheduled"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequestResponse"}}},"description":"Something went wrong while triggering an Execution Request"}},"summary":"Request Checks Execution for a Cluster","tags":["Checks"]}},"/api/clusters/{cluster_id}/connection_settings":{},"/api/databases":{"get":{"callbacks":{},"description":"List all the discovered HANA Databases on the target infrastructure","operationId":"TrentoWeb.SapSystemController.list_databases","parameters":[],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DatabasesCollection"}}},"description":"A collection of the discovered HANA Databases"}},"summary":"List HANA Databases","tags":["Target Infrastructure"]}},"/api/hosts":{"get":{"callbacks":{},"description":"List all the discovered hosts on the target infrastructure","operationId":"TrentoWeb.HostController.list","parameters":[],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HostsCollection"}}},"description":"A collection of the discovered hosts"}},"summary":"List hosts","tags":["Target Infrastructure"]}},"/api/hosts/{id}/heartbeat":{},"/api/installation/api-key":{"get":{"callbacks":{},"description":"Retrieve the generated API Key. Needed for Agents installation","operationId":"TrentoWeb.InstallationController.get_api_key","parameters":[],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"api_key":{"type":"string","x-struct":null,"x-validate":null}},"title":"ApiKey","type":"object","x-struct":null,"x-validate":null}}},"description":"The generated API Key"}},"summary":"Retrieve API Key","tags":["Platform"]}},"/api/runner/callback":{"post":{"callbacks":{},"description":"The Runner executing the Checks Selection on the target infrastructure, publishes updates about the progress of the Execution.","operationId":"TrentoWeb.ClusterController.runner_callback","parameters":[],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CallbackEvent"}}},"description":"Callback Event","required":false},"responses":{"202":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmptyResponse"}}},"description":"The Operation has been accepted, and the proper followup processes will trigger"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequestResponse"}}},"description":"Something went wrong during the operation"}},"summary":"Hook for Checks Execution progress updates","tags":["Checks"]}},"/api/sap_systems":{"get":{"callbacks":{},"description":"List all the discovered SAP Systems on the target infrastructure","operationId":"TrentoWeb.SapSystemController.list","parameters":[],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SAPSystemsCollection"}}},"description":"A collection of the discovered SAP Systems"}},"summary":"List SAP Systems","tags":["Target Infrastructure"]}},"/api/sap_systems/health":{"get":{"callbacks":{},"description":"Provide an aggregated overview of the health of the discovered SAP Systems (and their components) on the target infrastructure","operationId":"TrentoWeb.HealthOverviewController.overview","parameters":[],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthOverview"}}},"description":"An overview of the health of the discovered SAP Systems and their components"}},"summary":"Health overview of the discovered SAP Systems","tags":["Target Infrastructure"]}},"/api/settings":{"get":{"callbacks":{},"description":"Provides the Platform Settings for the current installation.","operationId":"TrentoWeb.SettingsController.settings","parameters":[],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlatformSettings"}}},"description":"Platform Settings"}},"summary":"Platform Settings","tags":["Platform"]}}},"security":[],"servers":[{"url":"http://localhost:4002","variables":{}}],"tags":[{"description":"Providing access to the discovered target infrastructure","name":"Target Infrastructure"},{"description":"Providing Checks related feature","name":"Checks"},{"description":"Providing access to Trento Platform features","name":"Platform"}]}
